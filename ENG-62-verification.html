<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ENG-62: Auto-push to GitHub after commit</title>
<style>
  body { font-family: system-ui, sans-serif; max-width: 900px; margin: 20px auto; padding: 0 20px; background: #0d1117; color: #c9d1d9; }
  h1 { color: #58a6ff; border-bottom: 1px solid #30363d; padding-bottom: 10px; }
  h2 { color: #79c0ff; margin-top: 30px; }
  .file { background: #161b22; border: 1px solid #30363d; border-radius: 6px; padding: 16px; margin: 12px 0; }
  .file-name { color: #f0883e; font-weight: bold; font-size: 14px; margin-bottom: 8px; }
  .change { color: #7ee787; font-size: 13px; margin: 4px 0; padding-left: 12px; }
  .status { background: #238636; color: white; padding: 4px 12px; border-radius: 12px; font-size: 13px; display: inline-block; }
  .summary { background: #161b22; border: 1px solid #30363d; border-radius: 6px; padding: 16px; margin-top: 20px; }
  .workflow { background: #1c2333; border-left: 3px solid #58a6ff; padding: 12px 16px; margin: 8px 0; font-size: 13px; }
  code { background: #1c2333; padding: 2px 6px; border-radius: 3px; color: #f0883e; }
</style>
</head>
<body>
  <h1>ENG-62: Auto-push to GitHub after commit</h1>
  <p><span class="status">IMPLEMENTED</span></p>

  <h2>Files Modified</h2>

  <div class="file">
    <div class="file-name">prompts/coding_agent_prompt.md</div>
    <div class="change">+ Added detailed GitHub Auto-Push section (ENG-62) with 4 steps</div>
    <div class="change">+ Step 1: Check GITHUB_TOKEN configuration</div>
    <div class="change">+ Step 2: Create agent/{issue-id} branch from origin/main</div>
    <div class="change">+ Step 3: Push after commit (only after lint-gate passes)</div>
    <div class="change">+ Step 4: Create PR on task completion via gh pr create</div>
    <div class="change">+ Added branch and pr_url fields to output format</div>
  </div>

  <div class="file">
    <div class="file-name">prompts/orchestrator_prompt.md</div>
    <div class="change">+ Expanded GitHub section with branch, push, and PR instructions</div>
    <div class="change">+ Added instructions for delegating GitHub steps to coding agent</div>
    <div class="change">+ Added graceful skip when GITHUB_TOKEN is not set</div>
  </div>

  <div class="file">
    <div class="file-name">prompts/execute_task.md</div>
    <div class="change">+ Added Step 2.5: GitHub Branch creation before implementation</div>
    <div class="change">+ Updated Step 4: Commit and Push (push after lint-gate)</div>
    <div class="change">+ Updated Step 5: PR creation before marking Done</div>
  </div>

  <h2>Workflow Summary</h2>

  <div class="workflow">
    <strong>1. Branch:</strong> <code>git checkout -b agent/{issue-id} origin/main</code><br>
    Created before first commit. Skipped if GITHUB_TOKEN not set.
  </div>
  <div class="workflow">
    <strong>2. Commit:</strong> <code>git commit -m "feat: ..."</code><br>
    Normal commit workflow with lint-gate verification.
  </div>
  <div class="workflow">
    <strong>3. Push:</strong> <code>git push -u origin agent/{issue-id}</code><br>
    Only after lint-gate passes. Failure does not block task.
  </div>
  <div class="workflow">
    <strong>4. PR:</strong> <code>gh pr create --base main --head agent/{issue-id}</code><br>
    Created when task is fully complete. PR URL passed to task agent.
  </div>

  <h2>Pre-existing Support</h2>
  <div class="summary">
    <p>The <code>github_integration.py</code> module was already implemented with:</p>
    <ul style="color: #7ee787; font-size: 13px;">
      <li>GitHubClient class with push, PR, and status check methods</li>
      <li>auto_push_after_commit() convenience function</li>
      <li>create_agent_branch() for branch management</li>
      <li>is_github_configured() for GITHUB_TOKEN detection</li>
      <li>Branch sanitization and error handling</li>
    </ul>
    <p>This task adds the <strong>prompt-level instructions</strong> so agents know when and how to use these capabilities.</p>
  </div>
</body>
</html>
